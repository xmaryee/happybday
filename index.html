<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –ú–∞—à–∏!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ -->
    <audio id="background-music" loop>
        <source src="background-music.mp3" type="audio/mpeg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
    </audio>

    <div class="container">
        <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div id="confetti-container"></div>
        
        <!-- –ó–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ -->
        <div id="stars-container"></div>

        <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω -->
            <div class="welcome-screen" id="welcome-screen">
                <div class="sisters-title">
                    <h1>üíù –û—Ç –ú–∞—à–∏ –¥–ª—è –ü–æ–ª–∏–Ω—ã üíù</h1>
                    <p class="sisters-subtitle">–û—Å–æ–±–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –º–æ–µ–π —Å—Ç–∞—Ä—à–µ–π —Å–µ—Å—Ç—Ä—ã!</p>
                </div>
                
                <div class="entrance-animation">
                    <div class="heart-pulse">üíñ</div>
                    <p class="enter-hint">–ù–∞–∂–º–∏ anywhere —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</p>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
            <div class="content-wrapper" id="content-wrapper">
                <div class="sister-message">
                    <h2>–ú–æ—è –¥–æ—Ä–æ–≥–∞—è –ü–æ–ª–∏–Ω–∫–∞! üíï</h2>
                    <p>–£ –º–µ–Ω—è –¥–ª—è —Ç–µ–±—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –æ—Å–æ–±—ã–π —Å—é—Ä–ø—Ä–∏–∑!</p>
                </div>

                <!-- –ò–≥—Ä—ã –∏ –∑–∞–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–æ–º -->
                <div class="pre-envelope-games">
                    <!-- –ò–≥—Ä–∞ 1: –ö–ª–∏–∫–µ—Ä-–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                    <div class="game-step active" id="game1">
                        <h3>üéÆ –ò–≥—Ä–∞ 1: –°–æ–±–µ—Ä–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                        <p>–ö–ª–∏–∫–∞–π –Ω–∞ —Å–ª–æ–≤–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:</p>
                        <div class="click-puzzle">
                            <div class="puzzle-words">
                                <button class="puzzle-word" data-order="1" onclick="selectWord(1)">–ü–æ–ª–∏–Ω–∞</button>
                                <button class="puzzle-word" data-order="2" onclick="selectWord(2)">—Ç—ã</button>
                                <button class="puzzle-word" data-order="3" onclick="selectWord(3)">—Å–∞–º–∞—è</button>
                                <button class="puzzle-word" data-order="4" onclick="selectWord(4)">–ª—É—á—à–∞—è</button>
                            </div>
                            <div class="selected-words">
                                <h4>–¢–≤–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ:</h4>
                                <div id="word-sequence" class="word-sequence"></div>
                            </div>
                        </div>
                        <button class="game-btn" onclick="checkWordPuzzle()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                        <button class="game-btn reset-btn" onclick="resetWordPuzzle()">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>

                    <!-- –ò–≥—Ä–∞ 2: –ù–∞–π–¥–∏ –≤—Å–µ —Å–µ—Ä–¥—Ü–∞ -->
                    <div class="game-step" id="game2">
                        <h3>üéÆ –ò–≥—Ä–∞ 2: –ù–∞–π–¥–∏ —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã–µ —Å–µ—Ä–¥—Ü–∞</h3>
                        <p>–ö–ª–∏–∫–Ω–∏ –Ω–∞ –≤—Å–µ —Å–µ—Ä–¥–µ—á–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ (5 —à—Ç—É–∫):</p>
                        <div class="heart-hunt">
                            <div class="hidden-heart" style="top: 20%; left: 15%;">üíñ</div>
                            <div class="hidden-heart" style="top: 60%; left: 80%;">üíñ</div>
                            <div class="hidden-heart" style="top: 30%; left: 70%;">üíñ</div>
                            <div class="hidden-heart" style="top: 80%; left: 25%;">üíñ</div>
                            <div class="hidden-heart" style="top: 45%; left: 50%;">üíñ</div>
                        </div>
                        <div class="heart-counter">–ù–∞–π–¥–µ–Ω–æ: <span id="hearts-found">0</span>/5</div>
                    </div>

                    <!-- –ò–≥—Ä–∞ 3: –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø—Ä–æ —Å–µ—Å—Ç—ë—Ä -->
                    <div class="game-step" id="game3">
                        <h3>üéÆ –ò–≥—Ä–∞ 3: –°–µ—Å—Ç—Ä–∏–Ω—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</h3>
                        <div class="quiz">
                            <div class="quiz-question">
                                <p>–ö—Ç–æ –≤—Å–µ–≥–¥–∞ –±—ã–ª —Ç–≤–æ–µ–π —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π?</p>
                                <button class="quiz-option" data-correct="true">–ú–æ—è —Å–µ—Å—Ç—Ä–∞ –ú–∞—à–∞</button>
                                <button class="quiz-option" data-correct="false">–ö—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π</button>
                            </div>
                            <div class="quiz-question">
                                <p>–ß—Ç–æ —Å–∞–º–æ–µ —Ü–µ–Ω–Ω–æ–µ —É —Å–µ—Å—Ç—ë—Ä?</p>
                                <button class="quiz-option" data-correct="false">–û–±—â–∏–µ –∏–≥—Ä—É—à–∫–∏</button>
                                <button class="quiz-option" data-correct="true">–û–±—â–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ª—é–±–æ–≤—å</button>
                            </div>
                        </div>
                        <button class="game-btn" onclick="checkAllQuiz()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                        <button class="game-btn reset-btn" onclick="resetQuiz()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                    </div>

                    <!-- –ò–≥—Ä–∞ 4: –ü–∞–º—è—Ç—å -->
                    <div class="game-step" id="game4">
                        <h3>üéÆ –ò–≥—Ä–∞ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏</h3>
                        <p>–ó–∞–ø–æ–º–Ω–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–æ–≤ –∑–∞ 5 —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–≤—Ç–æ—Ä–∏:</p>
                        <div class="memory-game">
                            <div class="sequence-display" id="sequence-display">
                                <h4>–ó–∞–ø–æ–º–Ω–∏ —ç—Ç—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</h4>
                                <div class="color-sequence">
                                    <div class="color-box pink"></div>
                                    <div class="color-box purple"></div>
                                    <div class="color-box gold"></div>
                                    <div class="color-box pink"></div>
                                </div>
                                <p class="sequence-hint">(—Ä–æ–∑–æ–≤—ã–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, –∑–æ–ª–æ—Ç–æ–π, —Ä–æ–∑–æ–≤—ã–π)</p>
                                <div class="timer" id="timer">5</div>
                            </div>
                            <div class="user-input" id="user-input" style="display: none;">
                                <h4>–¢–µ–ø–µ—Ä—å –ø–æ–≤—Ç–æ—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</h4>
                                <div class="color-options">
                                    <div class="color-option pink" onclick="selectColor('pink')" title="–†–æ–∑–æ–≤—ã–π"></div>
                                    <div class="color-option purple" onclick="selectColor('purple')" title="–§–∏–æ–ª–µ—Ç–æ–≤—ã–π"></div>
                                    <div class="color-option gold" onclick="selectColor('gold')" title="–ó–æ–ª–æ—Ç–æ–π"></div>
                                </div>
                                <div class="user-sequence" id="user-sequence"></div>
                                <button class="game-btn" onclick="checkMemory()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                                <button class="game-btn reset-btn" onclick="resetMemory()">–°–±—Ä–æ—Å–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è -->
                    <div class="game-step" id="game5">
                        <h3>üéâ –û—Ç–ª–∏—á–Ω–æ! –¢—ã –ø—Ä–æ—à–ª–∞ –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è!</h3>
                        <p>–¢–µ–ø–µ—Ä—å —Ç—ã –≥–æ—Ç–æ–≤–∞ –ø–æ–ª—É—á–∏—Ç—å –æ—Å–æ–±–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ!</p>
                        <button class="final-game-btn" onclick="showEnvelopeSection()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ—Å–ª–∞–Ω–∏—é ‚Üí</button>
                    </div>
                </div>

                <!-- –ö–æ–Ω–≤–µ—Ä—Ç —Å –ø–æ—Å–ª–∞–Ω–∏–µ–º -->
                <div class="envelope-section" id="envelope-section">
                    <div class="envelope-container">
                        <div class="envelope" id="envelope">
                            <div class="envelope-front" id="envelope-front">
                                <div class="stamp">üë≠</div>
                                <div class="to">–î–ª—è –º–æ–µ–π –ü–æ–ª–∏–Ω–æ—á–∫–∏!</div>
                                <div class="click-hint">‚Üì –ù–∞–∂–º–∏ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç ‚Üì</div>
                            </div>
                            <div class="letter" id="letter">
                                <div class="letter-content">
                                    <h2>–õ–∏—á–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ –æ—Ç –ú–∞—à–∏ üíå</h2>
                                    <div class="message-text">
                                        <p>–ü–æ–ª–∏–Ω, —è –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–∏–ª–∞ –≤ —Ç–µ–±—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã —Å–æ–º–Ω–µ–≤–∞–ª–∞—Å—å –≤ —Å–µ–±–µ!</p>
                                        <p>–¢—ã –ø—Ä–æ—à–ª–∞ —Ç–∞–∫–æ–π –±–æ–ª—å—à–æ–π –ø—É—Ç—å –∏ –∑–∞—Å–ª—É–∂–∏–ª–∞ –≤—Å–µ —Å–∞–º—ã–µ –ª—É—á—à–∏–µ –Ω–∞–≥—Ä–∞–¥—ã...</p>
                                    </div>
                                    
                                    <!-- –í–∏–¥–µ–æ -->
                                    <div class="video-container">
                                        <video controls class="personal-video" id="personal-video">
                                            <source src="polina.mp4" type="video/mp4">
                                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                                        </video>
                                        <div class="video-caption">–ù–∞—à –æ—Å–æ–±–µ–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤–º–µ—Å—Ç–µ! üé•</div>
                                    </div>

                                    <div class="message-text">
                                        <p>–ò —Ç–µ–ø–µ—Ä—å –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –ø–æ–ª—É—á–∏—Ç—å —Ç–≤–æ—é –∑–∞—Å–ª—É–∂–µ–Ω–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É!</p>
                                    </div>
                                    
                                    <!-- –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ -->
                                    <div class="puzzle" id="puzzle">
                                        <h3>üîê –£–≥–∞–¥–∞–π –Ω–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ —Å–µ—Å—Ç—Ä—ã:</h3>
                                        <div class="code-input">
                                            <input type="text" id="code1" maxlength="1" placeholder="_">
                                            <input type="text" id="code2" maxlength="1" placeholder="_">
                                            <input type="text" id="code3" maxlength="1" placeholder="_">
                                            <input type="text" id="code4" maxlength="1" placeholder="_">
                                        </div>
                                        <button id="verify-code" class="puzzle-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥</button>
                                        <button id="hint-btn" class="hint-btn">–ü—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É —É —Å–µ—Å—Ç—Ä—ã</button>
                                        <div id="hint-text" class="hint-text"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –§–∏–Ω–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞ -->
                <div id="secret-zone" class="secret-zone">
                    <div class="final-celebration">
                        <div class="sisters-hug">
                            <div class="hug-icon">üë≠</div>
                            <h2>üéâ –ü–û–õ–ò–ù–û–ß–ö–ê, –ü–û–ó–î–†–ê–í–õ–Ø–Æ! üéâ</h2>
                        </div>
                        
                        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="congratulations-flow">
                            <div class="congrat-message active">
                                <p>–ú–æ—è –¥–æ—Ä–æ–≥–∞—è —Å—Ç–∞—Ä—à–∞—è —Å–µ—Å—Ç—Ä–∞! –¢—ã –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å, –∫–∞–∫ —è –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π!</p>
                                <button class="next-congrat" onclick="showNextCongrat(1)">–ß–∏—Ç–∞—Ç—å –¥–∞–ª—å—à–µ ‚Üí</button>
                            </div>
                            
                            <div class="congrat-message">
                                <p>–ü–æ–º–Ω–∏—à—å, –∫–∞–∫ —Ç—ã —É—á–∏–ª–∞ –º–µ–Ω—è –∑–∞–≤—è–∑—ã–≤–∞—Ç—å —à–Ω—É—Ä–∫–∏? –ê —Ç–µ–ø–µ—Ä—å —Ç—ã –¥–æ—Å—Ç–∏–≥–ª–∞ —Ç–∞–∫–∏—Ö –≤—ã—Å–æ—Ç!</p>
                                <button class="next-congrat" onclick="showNextCongrat(2)">–ï—â–µ... ‚Üí</button>
                            </div>
                            
                            <div class="congrat-message">
                                <p>–¢—ã –≤—Å–µ–≥–¥–∞ –±—ã–ª–∞ –¥–ª—è –º–µ–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–µ—Å—Ç—Ä–æ–π, –∞ –Ω–∞—Å—Ç–æ—è—â–∏–º –ø—Ä–∏–º–µ—Ä–æ–º –¥–ª—è –ø–æ–¥—Ä–∞–∂–∞–Ω–∏—è.</p>
                                <button class="next-congrat" onclick="showNextCongrat(3)">–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º... ‚Üí</button>
                            </div>
                            
                            <div class="congrat-message">
                                <p>–Ø —Å–º–æ—Ç—Ä—é –Ω–∞ —Ç–µ–±—è –∏ –ø–æ–Ω–∏–º–∞—é - –≤–æ—Ç –æ–Ω, –Ω–∞—Å—Ç–æ—è—â–∏–π —É—Å–ø–µ—Ö, –∑–∞—Å–ª—É–∂–µ–Ω–Ω—ã–π —Ç—Ä—É–¥–æ–º –∏ —Å–µ—Ä–¥—Ü–µ–º!</p>
                                <button class="next-congrat" onclick="showNextCongrat(4)">–ò –Ω–∞–∫–æ–Ω–µ—Ü... ‚Üí</button>
                            </div>
                            
                            <div class="congrat-message">
                                <p>–ü–æ–ª–∏–Ω, –∑–Ω–∞–π - —è –≤—Å–µ–≥–¥–∞ –±—É–¥—É —Ç–≤–æ–µ–π —Å–∞–º–æ–π –ø—Ä–µ–¥–∞–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π —Ñ–∞–Ω–∞—Ç–∫–æ–π!</p>
                                <button class="next-congrat" onclick="showFinalReward()">–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É ‚Üí</button>
                            </div>
                        </div>

                        <!-- –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ -->
                        <div class="final-reward" id="final-reward">
                            <div class="trophy">üèÜ</div>
                            <p>–¢—ã –∑–∞—Å–ª—É–∂–∏–ª–∞ —ç—Ç—É –Ω–∞–≥—Ä–∞–¥—É –≤—Å–µ–º —Å–≤–æ–∏–º —Ç—Ä—É–¥–æ–º –∏ —É–ø–æ—Ä—Å—Ç–≤–æ–º!</p>
                            <a href="sert.jpg" class="final-certificate-btn" target="_blank">
                                üìú –ü–æ–ª—É—á–∏—Ç—å —Ç–≤–æ–π –∑–∞—Å–ª—É–∂–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç üìú
                            </a>
                        </div>

                        <div class="sister-promise">
                            <p>–û–±–µ—â–∞—é –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å —Ä—è–¥–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö! üíù</p>
                            <div class="sister-signature">–¢–≤–æ—è –ª—é–±—è—â–∞—è —Å–µ—Å—Ç—Ä–∞ –ú–∞—à–∞</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
        <div class="floating-hearts"></div>
        <div class="sister-symbols">üë≠üíïüåüüéÄüíñüëØ‚Äç‚ôÄÔ∏è –ü–æ–ª–∏–Ω–∞ + –ú–∞—à–∞ = üíù</div>
    </div>

    <audio id="celebration-sound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>

    <script>
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä
        let foundHearts = 0;
        let quizAnswers = {};
        let userColorSequence = [];
        let selectedWords = [];
        let memoryTimer;

        // –ù–∞—á–∞–ª–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.getElementById('welcome-screen').addEventListener('click', function() {
            this.style.display = 'none';
            document.getElementById('content-wrapper').style.display = 'block';
            document.getElementById('background-music').play().catch(() => {});
        });

        // –ò–≥—Ä–∞ 1: –ö–ª–∏–∫–µ—Ä-–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ
        function selectWord(order) {
            if (!selectedWords.includes(order)) {
                selectedWords.push(order);
                updateWordDisplay();
            }
        }

        function updateWordDisplay() {
            const wordSequence = document.getElementById('word-sequence');
            wordSequence.innerHTML = '';
            
            selectedWords.forEach(order => {
                const word = document.querySelector(`.puzzle-word[data-order="${order}"]`).textContent;
                const wordElement = document.createElement('span');
                wordElement.className = 'selected-word';
                wordElement.textContent = word + ' ';
                wordSequence.appendChild(wordElement);
            });
        }

        function checkWordPuzzle() {
            const correctSequence = [1, 2, 3, 4];
            const isCorrect = JSON.stringify(selectedWords) === JSON.stringify(correctSequence);
            
            if (isCorrect) {
                document.getElementById('game1').classList.remove('active');
                document.getElementById('game2').classList.add('active');
            } else {
                alert('–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: –ü–æ–ª–∏–Ω–∞ —Ç—ã —Å–∞–º–∞—è –ª—É—á—à–∞—è');
            }
        }

        function resetWordPuzzle() {
            selectedWords = [];
            document.getElementById('word-sequence').innerHTML = '';
        }

        // –ò–≥—Ä–∞ 2: –°–µ—Ä–¥—Ü–∞
        document.querySelectorAll('.hidden-heart').forEach(heart => {
            heart.addEventListener('click', function() {
                if (this.style.opacity !== '0.3') {
                    this.style.opacity = '0.3';
                    foundHearts++;
                    document.getElementById('hearts-found').textContent = foundHearts;
                    
                    if (foundHearts === 5) {
                        setTimeout(() => {
                            document.getElementById('game2').classList.remove('active');
                            document.getElementById('game3').classList.add('active');
                            initializeQuiz();
                        }, 1000);
                    }
                }
            });
        });

        // –ò–≥—Ä–∞ 3: –í–∏–∫—Ç–æ—Ä–∏–Ω–∞
        function initializeQuiz() {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.style.background = '';
                option.style.pointerEvents = 'auto';
                option.classList.remove('correct', 'wrong');
                
                option.addEventListener('click', function() {
                    const question = this.closest('.quiz-question');
                    const allOptions = question.querySelectorAll('.quiz-option');
                    
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫ –≤ —ç—Ç–æ–º –≤–æ–ø—Ä–æ—Å–µ
                    allOptions.forEach(opt => {
                        opt.style.background = '';
                        opt.classList.remove('correct', 'wrong');
                    });
                    
                    // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
                    if (this.dataset.correct === 'true') {
                        this.style.background = '#a8e6cf';
                        this.classList.add('correct');
                    } else {
                        this.style.background = '#ff6b6b';
                        this.classList.add('wrong');
                    }
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
                    const questionNum = Array.from(document.querySelectorAll('.quiz-question')).indexOf(question) + 1;
                    quizAnswers[questionNum] = this.dataset.correct === 'true';
                });
            });
        }

        function checkAllQuiz() {
            const questions = document.querySelectorAll('.quiz-question');
            let allAnswered = true;
            let allCorrect = true;
            
            questions.forEach((question, index) => {
                const questionNum = index + 1;
                if (quizAnswers[questionNum] === undefined) {
                    allAnswered = false;
                    return;
                }
                if (!quizAnswers[questionNum]) {
                    allCorrect = false;
                }
            });
            
            if (!allAnswered) {
                alert('–û—Ç–≤–µ—Ç—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã!');
                return;
            }
            
            if (allCorrect) {
                document.getElementById('game3').classList.remove('active');
                document.getElementById('game4').classList.add('active');
                startMemoryGame();
            } else {
                alert('–ï—Å—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.');
            }
        }

        function resetQuiz() {
            quizAnswers = {};
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.style.background = '';
                option.style.pointerEvents = 'auto';
                option.classList.remove('correct', 'wrong');
            });
        }

        // –ò–≥—Ä–∞ 4: –ü–∞–º—è—Ç—å (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø)
        function startMemoryGame() {
            userColorSequence = [];
            document.getElementById('user-sequence').innerHTML = '';
            document.getElementById('sequence-display').style.display = 'block';
            document.getElementById('user-input').style.display = 'none';
            
            let timeLeft = 5;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            
            memoryTimer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(memoryTimer);
                    document.getElementById('sequence-display').style.display = 'none';
                    document.getElementById('user-input').style.display = 'block';
                }
            }, 1000);
        }

        function selectColor(color) {
            userColorSequence.push(color);
            const userSeq = document.getElementById('user-sequence');
            const colorBox = document.createElement('div');
            colorBox.className = `color-box ${color}`;
            userSeq.appendChild(colorBox);
        }

        function checkMemory() {
            const correctSequence = ['pink', 'purple', 'gold', 'pink'];
            const isCorrect = JSON.stringify(userColorSequence) === JSON.stringify(correctSequence);
            
            if (isCorrect) {
                document.getElementById('game4').classList.remove('active');
                document.getElementById('game5').classList.add('active');
            } else {
                alert('–ù–µ —Å–æ–≤—Å–µ–º —Ç–∞–∫! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑: —Ä–æ–∑–æ–≤—ã–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, –∑–æ–ª–æ—Ç–æ–π, —Ä–æ–∑–æ–≤—ã–π');
                resetMemory();
            }
        }

        function resetMemory() {
            userColorSequence = [];
            document.getElementById('user-sequence').innerHTML = '';
            startMemoryGame();
        }

        function showEnvelopeSection() {
            document.querySelector('.pre-envelope-games').style.display = 'none';
            document.getElementById('envelope-section').style.display = 'block';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–û)
        document.getElementById('envelope').addEventListener('click', function() {
            if (!this.classList.contains('opened')) {
                this.classList.add('opened');
                // –°–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–µ–¥–Ω—é—é —á–∞—Å—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è
                document.getElementById('envelope-front').style.display = 'none';
                createStars();
                document.getElementById('celebration-sound').play();
                
                setTimeout(() => {
                    document.getElementById('puzzle').style.opacity = '1';
                    document.getElementById('puzzle').style.transform = 'translateY(0)';
                }, 1000);
            }
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—É–∑—ã–∫–æ–π –ø—Ä–∏ –≤–∏–¥–µ–æ
        document.getElementById('personal-video').addEventListener('play', function() {
            document.getElementById('background-music').pause();
        });

        document.getElementById('personal-video').addEventListener('pause', function() {
            document.getElementById('background-music').play();
        });

        // –ü–æ–¥—Å–∫–∞–∑–∫–∏
        let hintLevel = 0;
        document.getElementById('hint-btn').addEventListener('click', function() {
            const hintText = document.getElementById('hint-text');
            hintLevel++;
            
            if (hintLevel === 1) {
                hintText.innerHTML = 'üí° –°–µ—Å—Ç—Ä–∏–Ω—Å–∫–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞: –ö–∞–∫-—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–≤–æ–∏–º –ø–∏–Ω-–∫–æ–¥–æ–º, –Ω–æ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é';
            } else if (hintLevel === 2) {
                hintText.innerHTML = 'üí° –ï—â–µ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–º –¥–Ω–µ–º... –ü–æ–¥—É–º–∞–π –æ –¥–∞—Ç–µ!';
            } else {
                hintText.innerHTML = 'üí° –°–µ–≥–æ–¥–Ω—è 31 –æ–∫—Ç—è–±—Ä—è... 31-10... 3110!';
            }
            
            hintText.style.display = 'block';
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (3110)
        document.getElementById('verify-code').addEventListener('click', function() {
            const code1 = document.getElementById('code1').value;
            const code2 = document.getElementById('code2').value;
            const code3 = document.getElementById('code3').value;
            const code4 = document.getElementById('code4').value;
            
            const enteredCode = code1 + code2 + code3 + code4;
            
            if (enteredCode === '3110') {
                // –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω–≤–µ—Ä—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ
                document.getElementById('envelope-section').style.display = 'none';
                document.getElementById('secret-zone').style.display = 'block';
                document.getElementById('puzzle').innerHTML = '<div class="success">‚úÖ –£—Ä–∞! –ö–æ–¥ –≤–µ—Ä–Ω—ã–π! –¢—ã –Ω–∞—Å—Ç–æ—è—â–∞—è —É–º–Ω–∏—á–∫–∞! üíï</div>';
                createConfetti();
                document.getElementById('celebration-sound').play();
                
            } else {
                document.getElementById('puzzle').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('puzzle').classList.remove('shake');
                }, 500);
                
                document.querySelectorAll('.code-input input').forEach(input => {
                    input.style.borderColor = '#ff6b6b';
                    input.style.background = '#ffeaea';
                });
            }
        });

        // –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –æ—á–µ—Ä–µ–¥–∏
        function showNextCongrat(step) {
            document.querySelectorAll('.congrat-message').forEach(msg => {
                msg.classList.remove('active');
            });
            document.querySelectorAll('.congrat-message')[step].classList.add('active');
        }

        function showFinalReward() {
            document.querySelector('.congratulations-flow').style.display = 'none';
            document.getElementById('final-reward').style.display = 'block';
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è–º–∏ –≤–≤–æ–¥–∞
        document.querySelectorAll('.code-input input').forEach((input, index, inputs) => {
            input.addEventListener('input', function() {
                this.value = this.value.replace(/[^0-9]/g, '');
                this.style.borderColor = '#4ecdc4';
                this.style.background = 'white';
                
                if (this.value.length === 1 && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });
            
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value === '' && index > 0) {
                    inputs[index - 1].focus();
                }
            });
        });

        // –ê–Ω–∏–º–∞—Ü–∏–∏
        function createStars() {
            const starsContainer = document.getElementById('stars-container');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        function createConfetti() {
            const confettiContainer = document.getElementById('confetti-container');
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confettiContainer.appendChild(confetti);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≤–∞—é—â–∏—Ö —Å–µ—Ä–¥–µ—Ü
        function createHearts() {
            const heartsContainer = document.querySelector('.floating-hearts');
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = 'üíñ';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heartsContainer.appendChild(heart);
            }
        }

        createHearts();
    </script>
</body>
</html>